<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico Financeiro PF & PJ - Descubra Sua Verdade</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1B4332 0%, #2D6A4F 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #52B788, #40916C);
            padding: 30px 25px;
            text-align: center;
            color: white;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px 25px;
        }
        
        .question-container {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .question-container.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #2c3e50;
            line-height: 1.4;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .option {
            padding: 15px 20px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 15px;
            line-height: 1.4;
        }
        
        .option:hover {
            background: #D8F3DC;
            border-color: #52B788;
            transform: translateY(-2px);
        }
        
        .option.selected {
            background: #52B788;
            color: white;
            border-color: #40916C;
        }
        
        .progress {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #52B788, #40916C);
            transition: width 0.3s ease;
            border-radius: 3px;
        }
        
        .progress-text {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #52B788, #40916C);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(82, 183, 136, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .result-container {
            display: none;
            text-align: center;
        }
        
        .result-title {
            font-size: 24px;
            font-weight: 700;
            color: #ff6b6b;
            margin-bottom: 20px;
        }
        
        .result-description {
            background: #fff5f5;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: left;
            border-left: 5px solid #ff6b6b;
        }
        
        .result-description h3 {
            color: #c53030;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .result-description p {
            color: #2d3748;
            line-height: 1.6;
            margin-bottom: 12px;
        }
        
        .pain-section {
            background: #ffe6e6;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }
        
        .pain-section h4 {
            color: #d63031;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .solution-section {
            background: #e6f3ff;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #007bff;
        }
        
        .solution-section h4 {
            color: #0056b3;
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .initial-form {
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #52B788;
        }
        
        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .restart-btn {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 20px;
        }

        .admin-panel {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid #dee2e6;
        }

        .admin-btn {
            background: #343a40;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .admin-btn:hover {
            background: #495057;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #dee2e6;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-card h4 {
            font-size: 28px;
            margin-bottom: 8px;
            color: #52B788;
            font-weight: bold;
        }

        .stat-card small {
            color: #666;
            font-size: 13px;
            font-weight: 500;
        }

        .cta-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #52B788;
        }
        
        .cta-btn {
            background: #52B788;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: all 0.3s ease;
        }

        .cta-btn:hover {
            background: #40916C;
            transform: translateY(-2px);
        }

        .admin-access {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .admin-access input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .admin-access input.admin-valid {
            border-color: #52B788;
            background: #d8f3dc;
        }

        .admin-access small {
            color: #666;
            font-size: 12px;
        }

        .profile-list {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }

        .profile-item {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile-item:last-child {
            border-bottom: none;
        }

        .profile-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .profile-count {
            background: #52B788;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .section-title {
            background: #f8f9fa;
            padding: 10px 15px;
            margin: 20px -25px;
            border-left: 4px solid #52B788;
            font-weight: 600;
            color: #2c3e50;
        }

        .checkbox-wrapper {
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: auto;
            margin: 0;
            margin-top: 3px;
        }

        .checkbox-wrapper label {
            margin-bottom: 0;
            flex: 1;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üí∏ Diagn√≥stico Financeiro</h1>
            <p>Descubra a verdade sobre sua vida financeira</p>
            <small style="opacity: 0.8;">Pessoa F√≠sica ‚Ä¢ Pessoa Jur√≠dica ‚Ä¢ Aut√¥nomo</small>
        </div>
        
        <div class="content">
            <div id="initialForm" class="initial-form">
                <div class="warning">
                    <strong>‚ö†Ô∏è ATEN√á√ÉO:</strong> Este diagn√≥stico vai revelar verdades desconfort√°veis sobre sua situa√ß√£o financeira. Continue apenas se estiver preparado(a) para encarar a realidade.
                </div>
                
                <div class="form-group">
                    <label for="name">Nome Completo*</label>
                    <input type="text" id="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">E-mail*</label>
                    <input type="email" id="email" required>
                </div>
                
                <div class="form-group">
                    <label for="phone">Telefone*</label>
                    <input type="tel" id="phone" required>
                </div>

                <div class="form-group">
                    <label for="segment">Segmento*</label>
                    <select id="segment" required onchange="updateIncomeOptions()">
                        <option value="">Selecione seu perfil</option>
                        <option value="PF">üè† Pessoa F√≠sica (CPF)</option>
                        <option value="PJ">üè¢ Pessoa Jur√≠dica (CNPJ)</option>
                        <option value="AUTONOMO">üë®‚Äçüíº Aut√¥nomo/Profissional Liberal</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="age">Idade*</label>
                    <select id="age" required>
                        <option value="">Selecione</option>
                        <option value="<18">Menor de 18</option>
                        <option value="18-24">18-24 anos</option>
                        <option value="25-34">25-34 anos</option>
                        <option value="35-44">35-44 anos</option>
                        <option value="45-54">45-54 anos</option>
                        <option value="55-64">55-64 anos</option>
                        <option value="65+">65+ anos</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="income" id="incomeLabel">Renda Mensal*</label>
                    <select id="income" required>
                        <option value="">Selecione</option>
                    </select>
                </div>

                <div class="form-group">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="authorization" required>
                        <label for="authorization">Autorizo o envio do meu diagn√≥stico PARA A PR√ìSPERA CONSULTORIA FINANCEIRA*</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="followUp">Prefer√™ncia de follow-up (opcional)</label>
                    <select id="followUp">
                        <option value="">Selecione</option>
                        <option value="WhatsApp">WhatsApp</option>
                        <option value="E-mail">E-mail</option>
                        <option value="Liga√ß√£o">Liga√ß√£o</option>
                    </select>
                </div>
                
                <button class="btn btn-primary" onclick="startQuiz()" style="width: 100%;">
                    COME√áAR DIAGN√ìSTICO
                </button>
                
                <!-- Campo para acesso admin -->
                <div class="admin-access">
                    <input type="password" id="adminCode" placeholder="C√≥digo de acesso especial..." oninput="checkAdminCode()" autocomplete="off">
                    <small>Para administradores: digite o c√≥digo de acesso</small>
                </div>
            </div>
            
            <div id="quizContainer" style="display: none;">
                <div class="progress">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div class="progress-text" id="progressText">Pergunta 1 de 15</div>
                
                <div id="questionsContainer"></div>
                
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>Anterior</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Pr√≥xima</button>
                </div>
            </div>
            
            <div id="resultContainer" class="result-container">
                <div id="resultContent"></div>
                <button class="restart-btn" onclick="restartQuiz()">Refazer Diagn√≥stico</button>
            </div>

            <!-- Painel Admin -->
            <div id="adminPanel" class="admin-panel">
                <h3>üîß PAINEL ADMINISTRATIVO</h3>
                <div>
                    <button class="admin-btn" onclick="showStats()">üìä Ver Estat√≠sticas</button>
                    <button class="admin-btn" onclick="generateProfileReport()">üìã Relat√≥rio dos Perfis</button>
                    <button class="admin-btn" onclick="exportData()">üíæ Exportar Dados</button>
                    <button class="admin-btn" onclick="generateQRCode()">üì± Gerar QR Code & Link</button>
                    <button class="admin-btn" onclick="clearData()">üóëÔ∏è Limpar Base</button>
                    <button class="admin-btn" onclick="hideAdmin()">‚ùå Fechar</button>
                </div>
                <div id="statsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        // Base de dados local
        let diagnosticData = [];
        
        // Fun√ß√£o segura para carregar dados
        function loadData() {
            try {
                const storedData = localStorage.getItem('diagnosticData');
                if (storedData) {
                    diagnosticData = JSON.parse(storedData);
                }
            } catch (e) {
                console.log('localStorage indispon√≠vel, usando mem√≥ria local');
                diagnosticData = [];
            }
        }

        // Fun√ß√£o segura para salvar dados
        function saveData() {
            try {
                localStorage.setItem('diagnosticData', JSON.stringify(diagnosticData));
            } catch (e) {
                console.log('localStorage indispon√≠vel, dados mantidos em mem√≥ria');
            }
        }

        // Inicializar dados
        loadData();
        
        let currentSegment = '';
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let currentUser = {};

        // Perguntas estruturadas
        const questions = [
            // BLOCO A - Situa√ß√£o Financeira
            {
                section: "BLOCO A - Situa√ß√£o Financeira",
                question: "A1. Quantos meses de reserva financeira voc√™ tem hoje?",
                options: [
                    { text: "0 meses", points: 3 },
                    { text: "Meio m√™s (‚âà15 dias)", points: 2 },
                    { text: "1 m√™s", points: 2 },
                    { text: "3 meses", points: 1 },
                    { text: "6 meses ou mais", points: 0 }
                ]
            },
            {
                section: "BLOCO A - Situa√ß√£o Financeira",
                question: "A2. Quanto da sua renda/faturamento est√° comprometido com d√≠vidas/parcelas?",
                options: [
                    { text: "0-25%", points: 0 },
                    { text: "26-50%", points: 1 },
                    { text: "51-75%", points: 2 },
                    { text: "76% ou mais", points: 3 }
                ]
            },
            {
                section: "BLOCO A - Situa√ß√£o Financeira",
                question: "A3. Voc√™ tem parcelas em cart√£o com juros rotativos (que 'giram' todo m√™s)?",
                options: [
                    { text: "Sim - muitas", points: 3 },
                    { text: "Sim - poucas", points: 1 },
                    { text: "N√£o", points: 0 }
                ]
            },
            {
                section: "BLOCO A - Situa√ß√£o Financeira",
                question: "A4. Nos √∫ltimos 12 meses, por falta de caixa voc√™ precisou usar cr√©dito (empr√©stimo/cart√£o)?",
                options: [
                    { text: "Sim - v√°rias vezes", points: 3 },
                    { text: "Sim - 1 ou 2 vezes", points: 1 },
                    { text: "N√£o", points: 0 }
                ]
            },
            {
                section: "BLOCO A - Situa√ß√£o Financeira",
                question: {
                    PF: "A5. Voc√™ depende financeiramente de outra pessoa (parceiro/fam√≠lia) para pagar contas?",
                    PJ: "A5. Ciclo de recebimento do neg√≥cio:",
                    AUTONOMO: "A5. Entrada de renda √© previs√≠vel?"
                },
                options: {
                    PF: [
                        { text: "Sim", points: 2 },
                        { text: "Parcialmente", points: 1 },
                        { text: "N√£o", points: 0 }
                    ],
                    PJ: [
                        { text: "Recebo √† vista", points: 0 },
                        { text: "Mensal previs√≠vel", points: 0 },
                        { text: "Recebo parcelado (30/60/90)", points: 1 },
                        { text: "Recebo irregular", points: 2 }
                    ],
                    AUTONOMO: [
                        { text: "Sim", points: 0 },
                        { text: "Parcialmente", points: 1 },
                        { text: "N√£o", points: 2 }
                    ]
                }
            },

            // BLOCO B - H√°bitos Financeiros
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: "B1. Fa√ßo compras por impulso (compras sem planejar).",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: "B2. Evito abrir faturas, extratos ou analisar minhas contas.",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: "B3. Tenho o h√°bito de guardar automaticamente parte da renda (transfer√™ncia/dep√≥sito programado).",
                options: [
                    { text: "Sempre", points: 0 },
                    { text: "Frequentemente", points: 1 },
                    { text: "√Äs vezes", points: 2 },
                    { text: "Nunca", points: 3 }
                ]
            },
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: {
                    PF: "B4. Misturo contas pessoais e do neg√≥cio (n√£o separo PF/PJ).",
                    PJ: "B4. Misturo contas pessoais e empresariais (n√£o separo PF/PJ).",
                    AUTONOMO: "B4. Misturo contas pessoais e profissionais."
                },
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: "B5. Tenho metas financeiras claras (curto/m√©dio/longo) e acompanho elas.",
                options: [
                    { text: "Sempre", points: 0 },
                    { text: "Frequentemente", points: 1 },
                    { text: "√Äs vezes", points: 2 },
                    { text: "Nunca", points: 3 }
                ]
            },
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: "B6. Sinto medo de investir e deixo dinheiro parado por inseguran√ßa.",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },
            {
                section: "BLOCO B - H√°bitos Financeiros",
                question: "B7. Dependo quase 100% do meu trabalho para sobreviver financeiramente.",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },

            // BLOCO C - Mindset e Travas
            {
                section: "BLOCO C - Mindset e Travas",
                question: "C1. Sinto que 'dinheiro n√£o √© para pessoas como eu' / tenho baixa confian√ßa.",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },
            {
                section: "BLOCO C - Mindset e Travas",
                question: "C2. Tenho vergonha de falar sobre minhas d√≠vidas.",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            },
            {
                section: "BLOCO C - Mindset e Travas",
                question: "C3. Tenho pouco tempo para cuidar das finan√ßas (muito ocupado).",
                options: [
                    { text: "Nunca", points: 0 },
                    { text: "√Äs vezes", points: 1 },
                    { text: "Frequentemente", points: 2 },
                    { text: "Sempre", points: 3 }
                ]
            }
        ];

        // Perfis completos
        const profiles = {
            1: {
                title: "üêå CARACOL ENDIVIDADO",
                emoji: "üêå",
                subtitle: {
                    PF: "Voc√™ est√° sufocando em d√≠vidas pessoais",
                    PJ: "Sua empresa est√° sufocando em d√≠vidas",
                    AUTONOMO: "Voc√™ est√° sufocando em d√≠vidas profissionais"
                },
                description: {
                    PF: "Voc√™ vive em um ciclo vicioso de d√≠vidas que consome sua renda todos os meses. Os juros do cart√£o, cheque especial e empr√©stimos s√£o como sanguessugas sugando seu dinheiro.",
                    PJ: "Sua empresa vive em um ciclo vicioso de d√≠vidas que consome todo o faturamento. Juros banc√°rios, fornecedores em atraso e custos financeiros drenam o caixa empresarial.",
                    AUTONOMO: "Voc√™ vive um ciclo vicioso de d√≠vidas profissionais e pessoais que se misturam, consumindo recursos dos dois lados."
                },
                pain: {
                    PF: "A cada m√™s, voc√™ trabalha apenas para enriquecer os bancos. Seus juros consomem at√© 40% da sua renda. Voc√™ sente que JAMAIS conseguir√° 'come√ßar do zero' e que est√° condenado a essa vida de devedor eterno.",
                    PJ: "A cada m√™s, sua empresa trabalha apenas para pagar juros banc√°rios. Os custos financeiros consomem at√© 30% do faturamento. A empresa nunca consegue formar caixa para crescer.",
                    AUTONOMO: "Voc√™ trabalha s√≥ para alimentar um ciclo de d√≠vidas que se retroalimentam entre vida pessoal e profissional. Vive uma dupla pris√£o financeira."
                },
                solution: {
                    PF: "A Pr√≥spera pode criar um plano de amortiza√ß√£o estrat√©gico para voc√™ sair do vermelho e recuperar sua dignidade financeira.",
                    PJ: "A Pr√≥spera pode criar um plano de reestrutura√ß√£o empresarial para sua empresa sair do vermelho e voltar a crescer.",
                    AUTONOMO: "A Pr√≥spera pode criar um plano integrado de recupera√ß√£o financeira pessoal e profissional simultaneamente."
                }
            },
            2: {
                title: "üêπ HAMSTER NA RODA",
                emoji: "üêπ", 
                subtitle: {
                    PF: "Voc√™ vive de sal√°rio em sal√°rio sem folga",
                    PJ: "Empresa vive de faturamento em faturamento",
                    AUTONOMO: "Voc√™ vive de receita em receita sem reservas"
                },
                description: {
                    PF: "Todo m√™s √© a mesma hist√≥ria: recebe, paga contas, e sobra quase nada. Qualquer imprevisto vira pesadelo e mais d√≠vida.",
                    PJ: "Todo m√™s √© igual: fatura, paga custos operacionais, e sobra pouco ou nada. Qualquer problema vira crise de caixa.",
                    AUTONOMO: "Voc√™ vive uma corrida constante: receitas que mal cobrem os custos pessoais e profissionais."
                },
                pain: {
                    PF: "Voc√™ vive com ZERO seguran√ßa financeira. Uma consulta m√©dica, um pneu furado, um eletrodom√©stico quebrado e pronto: voc√™ est√° no vermelho.",
                    PJ: "Sua empresa vive com ZERO reserva. Um cliente inadimplente, um equipamento quebrado, uma multa fiscal e pronto: crise de caixa.",
                    AUTONOMO: "Voc√™ vive em constante inseguran√ßa: qualquer problema pessoal OU profissional pode derrubar tudo como um castelo de cartas."
                },
                solution: {
                    PF: "A Pr√≥spera vai te ensinar a quebrar esse ciclo vicioso e criar uma almofada financeira que te dar√° seguran√ßa real.",
                    PJ: "A Pr√≥spera pode criar um sistema de gest√£o de fluxo de caixa que dar√° estabilidade e crescimento √† sua empresa.",
                    AUTONOMO: "A Pr√≥spera pode integrar suas finan√ßas pessoais e profissionais criando seguran√ßa duradoura nos dois lados."
                }
            },
            3: {
                title: "üêí MACAQUINHO IMPULSIVO",
                emoji: "üêí",
                subtitle: {
                    PF: "Suas emo√ß√µes controlam seu dinheiro",
                    PJ: "Decis√µes empresariais por impulso",
                    AUTONOMO: "Impulsividade financeira total"
                },
                description: {
                    PF: "Voc√™ compra para se sentir bem, para impressionar, para compensar frustra√ß√µes. Suas compras s√£o movidas por impulso e busca de status.",
                    PJ: "Sua empresa investe por impulso: equipamentos caros, expans√µes sem planejamento, gastos para impressionar clientes.",
                    AUTONOMO: "Voc√™ √© impulsivo nos dois lados: gastos pessoais descontrolados E investimentos profissionais sem crit√©rio."
                },
                pain: {
                    PF: "Voc√™ sente uma culpa CONSTANTE ap√≥s as compras. Seu cart√£o est√° sempre no limite, voc√™ mente sobre gastos para fam√≠lia/parceiro.",
                    PJ: "Voc√™ se arrepende de investimentos empresariais constantes. A empresa gasta em status mas n√£o em resultados efetivos.",
                    AUTONOMO: "Duplo arrependimento: gastos pessoais E profissionais que drenam recursos sem gerar valor real."
                },
                solution: {
                    PF: "A Pr√≥spera pode te dar controle emocional sobre o dinheiro e mostrar como investir em vez de gastar compulsivamente.",
                    PJ: "A Pr√≥spera pode criar crit√©rios objetivos para investimentos empresariais baseados em ROI real.",
                    AUTONOMO: "A Pr√≥spera pode integrar controle emocional com crit√©rios racionais para decis√µes pessoais e profissionais."
                }
            },
            4: {
                title: "üêà GATO DOM√âSTICO",
                emoji: "üêà",
                subtitle: {
                    PF: "Voc√™ foge da pr√≥pria realidade financeira",
                    PJ: "Voc√™ foge da realidade financeira da empresa",
                    AUTONOMO: "Voc√™ foge de toda realidade financeira"
                },
                description: {
                    PF: "Voc√™ evita abrir extratos, n√£o organiza documentos, n√£o enfrenta sua situa√ß√£o financeira. Prefere n√£o saber a verdade.",
                    PJ: "Voc√™ evita relat√≥rios financeiros, n√£o acompanha indicadores, deixa tudo para o contador. Prefere n√£o saber a real situa√ß√£o.",
                    AUTONOMO: "Voc√™ foge tanto das finan√ßas pessoais quanto profissionais. Vive numa bolha de ignor√¢ncia financeira dupla."
                },
                pain: {
                    PF: "Voc√™ vive na ansiedade CONSTANTE do desconhecido. Multas por atraso, surpresas desagrad√°veis, decis√µes sempre em cima da hora.",
                    PJ: "Ansiedade constante sobre a real situa√ß√£o da empresa. Surpresas fiscais, problemas de fluxo descobertos tarde demais.",
                    AUTONOMO: "Dupla ansiedade: voc√™ n√£o sabe nem como est√° pessoalmente nem profissionalmente. Vive dirigindo de olhos fechados nos dois lados."
                },
                solution: {
                    PF: "A Pr√≥spera vai te dar um sistema organizado e rotinas que transformam caos em controle financeiro.",
                    PJ: "A Pr√≥spera pode criar dashboards simples e rotinas de acompanhamento que d√£o visibilidade empresarial.",
                    AUTONOMO: "A Pr√≥spera pode criar um sistema integrado que organiza e controla tanto suas finan√ßas pessoais quanto profissionais."
                }
            },
            5: {
                title: "üê¢ TARTARUGA CONSERVADORA",
                emoji: "üê¢",
                subtitle: {
                    PF: "Voc√™ est√° perdendo dinheiro 'guardando' dinheiro",
                    PJ: "Empresa perde dinheiro com excesso de conservadorismo",
                    AUTONOMO: "Conservadorismo excessivo nos dois lados"
                },
                description: {
                    PF: "Voc√™ tem o h√°bito de guardar, mas deixa tudo na poupan√ßa ou renda fixa muito conservadora. Tem pavor de 'perder' dinheiro investindo.",
                    PJ: "A empresa guarda recursos mas em aplica√ß√µes muito conservadoras. Perde oportunidades de crescimento por excesso de cautela.",
                    AUTONOMO: "Voc√™ √© ultraconservador nos dois lados: dinheiro pessoal E profissional rendendo abaixo do potencial."
                },
                pain: {
                    PF: "Voc√™ est√° PERDENDO DINHEIRO todos os meses para a infla√ß√£o. Seu poder de compra diminui constantemente.",
                    PJ: "A empresa perde competitividade por n√£o investir em crescimento. Concorrentes crescem enquanto voc√™s estagnam.",
                    AUTONOMO: "Dupla perda: recursos pessoais E profissionais corro√≠dos pela infla√ß√£o e falta de ousadia."
                },
                solution: {
                    PF: "A Pr√≥spera pode te mostrar investimentos seguros mas rent√°veis, saindo da paralisia do medo.",
                    PJ: "A Pr√≥spera pode criar uma estrat√©gia de crescimento controlado que alie seguran√ßa com rentabilidade empresarial.",
                    AUTONOMO: "A Pr√≥spera pode balancear conservadorismo com crescimento tanto pessoal quanto profissional."
                }
            },
            6: {
                title: "üêé CAVALO DE CORRIDA",
                emoji: "üêé",
                subtitle: {
                    PF: "Alta renda, baixa intelig√™ncia financeira",
                    PJ: "Alto faturamento, baixa rentabilidade",
                    AUTONOMO: "Alta receita, baixa acumula√ß√£o patrimonial"
                },
                description: {
                    PF: "Voc√™ ganha bem, mas gasta proporcionalmente. Se parar de trabalhar, n√£o aguenta nem poucos meses. Vive uma vida cara sem construir patrim√¥nio.",
                    PJ: "Empresa fatura bem mas n√£o acumula. Gasta tudo em opera√ß√£o e status empresarial. Se parar de vender, quebra r√°pido.",
                    AUTONOMO: "Voc√™ tem alta capacidade de gera√ß√£o de renda, mas n√£o acumula patrim√¥nio nem reservas."
                },
                pain: {
                    PF: "Voc√™ tem uma falsa sensa√ß√£o de seguran√ßa PERIGOS√çSSIMA. Amigos acham que voc√™ est√° bem, mas voc√™ sabe que est√° na corda bamba.",
                    PJ: "A empresa parece pr√≥spera por fora, mas internamente vive no limite. Um m√™s sem faturamento seria catastr√≥fico.",
                    AUTONOMO: "Falsa sensa√ß√£o de seguran√ßa: parece pr√≥spero mas est√° vulner√°vel nos dois lados."
                },
                solution: {
                    PF: "A Pr√≥spera vai te ensinar a converter sua alta renda em patrim√¥nio s√≥lido e reservas de emerg√™ncia.",
                    PJ: "A Pr√≥spera pode transformar alto faturamento em lucro real e reservas empresariais s√≥lidas.",
                    AUTONOMO: "A Pr√≥spera pode converter sua alta capacidade de gera√ß√£o de renda em patrim√¥nio s√≥lido integrado."
                }
            },
            7: {
                title: "üê£ FILHOTE NO NINHO",
                emoji: "üê£",
                subtitle: {
                    PF: "Sua seguran√ßa financeira depende de outros",
                    PJ: "Empresa depende de terceiros para sustenta√ß√£o",
                    AUTONOMO: "Depend√™ncia financeira total"
                },
                description: {
                    PF: "Voc√™ n√£o tem autonomia financeira completa, depende do parceiro ou fam√≠lia para sustento ou decis√µes financeiras importantes.",
                    PJ: "Empresa depende de s√≥cios, fam√≠lia ou investidores para capital de giro e decis√µes estrat√©gicas.",
                    AUTONOMO: "Voc√™ vive em depend√™ncia: pessoal E profissional de terceiros para sustenta√ß√£o financeira."
                },
                pain: {
                    PF: "Voc√™ vive com medo constante: 'E se acontecer algo com quem me sustenta?' Div√≥rcio, doen√ßa, morte - qualquer coisa pode acabar com sua seguran√ßa.",
                    PJ: "Medo constante de perder apoio dos s√≥cios/investidores. A empresa n√£o sobrevive sem suporte externo.",
                    AUTONOMO: "Duplo medo: perder apoio pessoal E profissional simultaneamente. Vulnerabilidade extrema nos dois lados."
                },
                solution: {
                    PF: "A Pr√≥spera pode te dar as ferramentas para conquistar independ√™ncia financeira e dignidade pessoal.",
                    PJ: "A Pr√≥spera pode criar um plano para sua empresa conquistar independ√™ncia de capital e sustentabilidade pr√≥pria.",
                    AUTONOMO: "A Pr√≥spera pode criar um plano integrado de independ√™ncia financeira pessoal e profissional."
                }
            },
            8: {
                title: "ü¶â CORUJINHA T√çMIDA",
                emoji: "ü¶â",
                subtitle: {
                    PF: "Tem dinheiro mas est√° travado pelo medo",
                    PJ: "Empresa tem capital mas paralisia de investimento",
                    AUTONOMO: "Recursos dispon√≠veis mas paralisado"
                },
                description: {
                    PF: "Voc√™ conseguiu acumular recursos, mas est√° paralisado pelo medo de investir. Fica na an√°lise eterna sem nunca agir.",
                    PJ: "A empresa tem caixa mas n√£o investe por medo. Paralisia por excesso de an√°lise e falta de a√ß√£o estrat√©gica.",
                    AUTONOMO: "Voc√™ tem recursos mas est√° paralisado pelo medo de tomar decis√µes de investimento."
                },
                pain: {
                    PF: "Voc√™ sente uma frustra√ß√£o CONSTANTE de saber que deveria fazer algo com seu dinheiro, mas a paralisia te impede.",
                    PJ: "Frustra√ß√£o de ver oportunidades passarem enquanto a empresa fica parada por excesso de cautela e an√°lise.",
                    AUTONOMO: "Dupla frustra√ß√£o: oportunidades perdidas tanto pessoais quanto profissionais por paralisia excessiva."
                },
                solution: {
                    PF: "A Pr√≥spera vai te dar confian√ßa e um plano simples para come√ßar a investir de forma segura e inteligente.",
                    PJ: "A Pr√≥spera pode criar crit√©rios objetivos de investimento que reduzam o medo e aumentem a a√ß√£o empresarial.",
                    AUTONOMO: "A Pr√≥spera pode criar um framework de decis√£o que d√™ seguran√ßa para investir nos dois lados."
                }
            },
            9: {
                title: "üêú FORMIGUINHA INCANS√ÅVEL",
                emoji: "üêú",
                subtitle: {
                    PF: "Trabalha muito, gasta tudo, n√£o constr√≥i nada",
                    PJ: "Empresa trabalha muito, reinveste tudo, n√£o acumula",
                    AUTONOMO: "Trabalho excessivo sem acumula√ß√£o patrimonial"
                },
                description: {
                    PF: "Voc√™ foca apenas em ganhar mais como solu√ß√£o, mas usa toda renda extra para sustentar um estilo de vida caro e impressionar outros.",
                    PJ: "Empresa foca s√≥ em faturar mais, mas reinveste tudo em opera√ß√£o/crescimento sem formar reservas ou distribuir lucros.",
                    AUTONOMO: "Voc√™ trabalha excessivamente mas n√£o acumula patrim√¥nio nem reservas."
                },
                pain: {
                    PF: "Voc√™ est√° se MATANDO de trabalhar para sustentar apar√™ncias. Trabalha mais de 12h por dia mas seu patrim√¥nio n√£o cresce.",
                    PJ: "A empresa consome toda energia dos s√≥cios. Fatura muito mas n√£o gera riqueza real para os propriet√°rios.",
                    AUTONOMO: "Voc√™ vive uma exaust√£o constante: trabalho intenso sem acumula√ß√£o patrimonial real."
                },
                solution: {
                    PF: "A Pr√≥spera pode te ensinar a trabalhar de forma mais inteligente e converter esfor√ßo em patrim√¥nio real.",
                    PJ: "A Pr√≥spera pode criar sistemas para sua empresa gerar riqueza real para os s√≥cios, n√£o apenas faturamento.",
                    AUTONOMO: "A Pr√≥spera pode otimizar seu trabalho focando em acumula√ß√£o patrimonial sustent√°vel."
                }
            },
            10: {
                title: "ü§ñ ROB√î ORGANIZADINHO",
                emoji: "ü§ñ",
                subtitle: {
                    PF: "Tem controle mas n√£o tem estrat√©gia",
                    PJ: "Empresa organizada mas sem vis√£o",
                    AUTONOMO: "Organiza√ß√£o sem estrat√©gia"
                },
                description: {
                    PF: "Voc√™ controla bem seus gastos, tem planilhas organizadas, mas n√£o tem objetivos claros nem estrat√©gia de crescimento patrimonial.",
                    PJ: "A empresa tem boa gest√£o financeira e controles, mas falta vis√£o estrat√©gica e planos de crescimento sustent√°vel.",
                    AUTONOMO: "Voc√™ √© organizado, mas sem uma estrat√©gia integrada que maximize o potencial."
                },
                pain: {
                    PF: "Voc√™ tem a sensa√ß√£o frustrante de estar 'fazendo tudo certo' mas n√£o est√° saindo do lugar nem crescendo patrim√¥nio.",
                    PJ: "A empresa est√° bem gerida mas estagnou. N√£o consegue dar o pr√≥ximo passo para crescimento exponencial.",
                    AUTONOMO: "Frustra√ß√£o: organiza√ß√£o sem progress√£o real."
                },
                solution: {
                    PF: "A Pr√≥spera pode transformar sua organiza√ß√£o em estrat√©gia de crescimento patrimonial acelerado.",
                    PJ: "A Pr√≥spera pode elevar sua empresa organizada a um patamar estrat√©gico de crescimento sustent√°vel.",
                    AUTONOMO: "A Pr√≥spera pode criar uma estrat√©gia integrada que maximize seu potencial organizado."
                }
            }
        };

        // Op√ß√µes de renda por segmento
        const incomeOptions = {
            PF: [
                "At√© R$ 3.000",
                "R$ 3.001 - R$ 5.000",
                "R$ 5.001 - R$ 10.000",
                "R$ 10.001 - R$ 20.000",
                "Acima de R$ 20.000"
            ],
            PJ: [
                "At√© R$ 10.000/m√™s",
                "R$ 10.000 - R$ 50.000/m√™s",
                "R$ 50.000 - R$ 200.000/m√™s",
                "Acima de R$ 200.000/m√™s"
            ],
            AUTONOMO: [
                "At√© R$ 3.000",
                "R$ 3.001 - R$ 5.000",
                "R$ 5.001 - R$ 10.000",
                "R$ 10.001 - R$ 20.000",
                "Acima de R$ 20.000"
            ]
        };

        function updateIncomeOptions() {
            const segment = document.getElementById('segment').value;
            const incomeSelect = document.getElementById('income');
            const incomeLabel = document.getElementById('incomeLabel');
            
            incomeSelect.innerHTML = '<option value="">Selecione</option>';
            
            if (segment) {
                currentSegment = segment;
                const options = incomeOptions[segment];
                const label = segment === 'PF' ? 'Renda Mensal*' : 
                             segment === 'PJ' ? 'Faturamento M√©dio Mensal*' : 
                             'Receita Mensal*';
                
                incomeLabel.textContent = label;
                
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.textContent = option;
                    incomeSelect.appendChild(optionElement);
                });
            }
        }

        function startQuiz() {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const segment = document.getElementById('segment').value;
            const age = document.getElementById('age').value;
            const income = document.getElementById('income').value;
            const authorization = document.getElementById('authorization').checked;
            const followUp = document.getElementById('followUp').value;

            if (!name || !email || !phone || !segment || !age || !income || !authorization) {
                alert('Por favor, preencha todos os campos obrigat√≥rios e aceite a autoriza√ß√£o.');
                return;
            }

            currentUser = {
                name, email, phone, segment, age, income, followUp,
                timestamp: new Date().toLocaleString()
            };

            document.getElementById('initialForm').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            
            currentQuestionIndex = 0;
            userAnswers = [];
            showQuestion();
        }

        function showQuestion() {
            const container = document.getElementById('questionsContainer');
            const question = questions[currentQuestionIndex];
            const segment = currentUser.segment;
            
            const questionText = typeof question.question === 'object' 
                ? question.question[segment] || question.question.PF 
                : question.question;
            
            const optionsList = typeof question.options === 'object' && question.options[segment] 
                ? question.options[segment] 
                : question.options;

            let sectionHtml = '';
            if (currentQuestionIndex === 0 || questions[currentQuestionIndex].section !== questions[currentQuestionIndex - 1]?.section) {
                sectionHtml = `<div class="section-title">${question.section}</div>`;
            }
            
            container.innerHTML = `
                ${sectionHtml}
                <div class="question-container active">
                    <div class="question">${questionText}</div>
                    <div class="options" id="options-${currentQuestionIndex}">
                        ${optionsList.map((option, index) => 
                            `<div class="option" onclick="selectOption(${currentQuestionIndex}, ${index})" data-points="${option.points}">
                                ${option.text}
                            </div>`
                        ).join('')}
                    </div>
                </div>
            `;
            
            if (userAnswers[currentQuestionIndex] !== undefined) {
                const points = userAnswers[currentQuestionIndex];
                const options = document.querySelectorAll(`#options-${currentQuestionIndex} .option`);
                options.forEach(option => {
                    if (parseInt(option.dataset.points) === points) {
                        option.classList.add('selected');
                    }
                });
            }
            
            updateProgress();
            updateNavButtons();
        }

        function selectOption(questionIndex, optionIndex) {
            const options = document.querySelectorAll(`#options-${questionIndex} .option`);
            options.forEach(opt => opt.classList.remove('selected'));
            
            const selectedOption = options[optionIndex];
            selectedOption.classList.add('selected');
            
            const points = parseInt(selectedOption.dataset.points);
            userAnswers[questionIndex] = points;
            
            updateNavButtons();
        }

        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `Pergunta ${currentQuestionIndex + 1} de ${questions.length}`;
        }

        function updateNavButtons() {
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            const hasAnswer = userAnswers[currentQuestionIndex] !== undefined;
            document.getElementById('nextBtn').disabled = !hasAnswer;
            
            if (currentQuestionIndex === questions.length - 1) {
                document.getElementById('nextBtn').textContent = 'Ver Resultado';
            } else {
                document.getElementById('nextBtn').textContent = 'Pr√≥xima';
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResult();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        function calculateProfile() {
            const totalPoints = userAnswers.reduce((sum, points) => sum + points, 0);
            const maxPoints = questions.length * 3;
            const riskPercentage = (totalPoints / maxPoints) * 100;

            if (riskPercentage >= 80) return 1;
            if (riskPercentage >= 70) return 2;
            if (riskPercentage >= 60) return 3;
            if (riskPercentage >= 50) return 4;
            if (riskPercentage >= 40) return 7;
            if (riskPercentage >= 30) return 9;
            if (riskPercentage >= 20) return 6;
            if (riskPercentage >= 15) return 8;
            if (riskPercentage >= 10) return 5;
            return 10;
        }

        function showResult() {
            const profileId = calculateProfile();
            const profile = profiles[profileId];
            const segment = currentUser.segment;
            
            const userData = {
                ...currentUser,
                profileId,
                profileTitle: profile.title,
                answers: userAnswers,
                totalPoints: userAnswers.reduce((sum, points) => sum + points, 0),
                completedAt: new Date().toLocaleString()
            };
            
            diagnosticData.push(userData);
            saveData();
            
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';
            
            const resultContent = `
                <div class="result-title">
                    ${profile.emoji} ${profile.title}
                </div>
                
                <div class="result-description">
                    <h3>${profile.subtitle[segment]}</h3>
                    <p>${profile.description[segment]}</p>
                    
                    <div class="pain-section">
                        <h4>üî• SUA DOR REAL:</h4>
                        <p>${profile.pain[segment]}</p>
                    </div>
                    
                    <div class="solution-section">
                        <h4>üí° SUA SOLU√á√ÉO:</h4>
                        <p>${profile.solution[segment]}</p>
                    </div>
                </div>
                
                <div class="cta-section">
                    <h3>üéØ PR√ìXIMO PASSO</h3>
                    <p>Agora que voc√™ conhece sua verdade financeira, √© hora de agir! A Pr√≥spera tem a solu√ß√£o espec√≠fica para seu perfil ${profile.title}.</p>
                    <button class="cta-btn" onclick="scheduleConsultation()">
                        QUERO TRANSFORMAR MINHA VIDA FINANCEIRA
                    </button>
                    <small style="display: block; margin-top: 10px; opacity: 0.7;">
                        Consultoria gratuita de 30 minutos para tra√ßar seu plano personalizado
                    </small>
                </div>
            `;
            
            document.getElementById('resultContent').innerHTML = resultContent;
        }

        function scheduleConsultation() {
            const profileId = calculateProfile();
            const profile = profiles[profileId];
            const message = `Ol√°! Acabei de fazer o Diagn√≥stico Financeiro e descobri que sou do perfil "${profile.title}". Gostaria de agendar uma consultoria gratuita para entender como a Pr√≥spera pode me ajudar a transformar minha situa√ß√£o financeira.

Meus dados:
Nome: ${currentUser.name}
Segmento: ${currentUser.segment}
Perfil: ${profile.title}`;

            const whatsappUrl = `https://wa.me/5534999999999?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        function restartQuiz() {
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('initialForm').style.display = 'block';
            
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('segment').value = '';
            document.getElementById('age').value = '';
            document.getElementById('income').innerHTML = '<option value="">Selecione</option>';
            document.getElementById('authorization').checked = false;
            document.getElementById('followUp').value = '';
            document.getElementById('adminCode').value = '';
            document.getElementById('adminPanel').style.display = 'none';
            
            currentQuestionIndex = 0;
            userAnswers = [];
            currentUser = {};
        }

        function checkAdminCode() {
            const code = document.getElementById('adminCode').value.trim();
            const adminPanel = document.getElementById('adminPanel');
            const adminInput = document.getElementById('adminCode');
            
            if (code === 'PROSPERAADMIN2024') {
                adminPanel.style.display = 'block';
                adminInput.classList.add('admin-valid');
            } else if (code === '') {
                adminPanel.style.display = 'none';
                adminInput.classList.remove('admin-valid');
            } else {
                adminPanel.style.display = 'none';
                adminInput.classList.remove('admin-valid');
            }
        }

        function hideAdmin() {
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('adminCode').value = '';
            document.getElementById('adminCode').classList.remove('admin-valid');
        }

        function showStats() {
            const data = diagnosticData;
            const totalUsers = data.length;
            
            if (totalUsers === 0) {
                document.getElementById('statsContainer').innerHTML = `
                    <div style="text-align: center; padding: 30px; color: #666; background: white; border-radius: 12px; margin-top: 20px;">
                        <h3>üìä Estat√≠sticas</h3>
                        <p style="margin: 20px 0;">Nenhum diagn√≥stico realizado ainda.</p>
                        <small>Os dados aparecer√£o aqui conforme os usu√°rios completarem o diagn√≥stico.</small>
                    </div>
                `;
                return;
            }
            
            const segmentStats = { PF: 0, PJ: 0, AUTONOMO: 0 };
            const profileStats = {};
            
            data.forEach(user => {
                if (user.segment) {
                    segmentStats[user.segment] = (segmentStats[user.segment] || 0) + 1;
                }
                
                const profileTitle = user.profileTitle || 'Perfil n√£o identificado';
                profileStats[profileTitle] = (profileStats[profileTitle] || 0) + 1;
            });
            
            let statsHtml = `
                <h3 style="margin-top: 20px; color: #2c3e50;">üìä ESTAT√çSTICAS GERAIS</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h4>${totalUsers}</h4>
                        <small>Total de Diagn√≥sticos</small>
                    </div>
                    <div class="stat-card">
                        <h4>${segmentStats.PF || 0}</h4>
                        <small>Pessoa F√≠sica</small>
                    </div>
                    <div class="stat-card">
                        <h4>${segmentStats.PJ || 0}</h4>
                        <small>Pessoa Jur√≠dica</small>
                    </div>
                    <div class="stat-card">
                        <h4>${segmentStats.AUTONOMO || 0}</h4>
                        <small>Aut√¥nomo</small>
                    </div>
                </div>
                
                <h4 style="margin-top: 25px; color: #2c3e50;">üêæ Perfis Mais Comuns:</h4>
                <div class="profile-list">
            `;
            
            const sortedProfiles = Object.entries(profileStats)
                .sort(([,a], [,b])
