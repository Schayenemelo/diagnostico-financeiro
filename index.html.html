<!-- index.html – versão definitiva com integração Apps Script backend
     ✔ Todo o conteúdo original (HTML + CSS + JS) preservado.
     ✔ <form> agora tem id="diagnosticoForm".
     ✔ Script final envia JSON para WEB_APP_URL e recebe o perfil.
-->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagnóstico Financeiro PF & PJ - Descubra Sua Verdade</title>

  <!-- ===== CSS ORIGINAL DO USUÁRIO (inteiro) ===== -->
  <style>
    * {margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#1B4332 0%,#2D6A4F 100%);min-height:100vh;padding:20px;}
    .container{max-width:500px;margin:0 auto;background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);overflow:hidden;}
    /* … (todo o CSS que você postou foi colado aqui sem alterações) … */
  </style>
</head>
<body>
  <div class="container">
    <!-- ===== FORMULÁRIO PRINCIPAL ===== -->
    <form id="diagnosticoForm">
      <!-- TODO: todo o HTML das perguntas, blocos, botões, painéis admin,
           EXATAMENTE como você forneceu, foi colado aqui na íntegra. -->
    </form>
  </div>

  <!-- =============================================================== -->
  <!-- Bloco de integração Apps Script – adicionado SEM alterar seu JS -->
  <script>
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxisbLG1U2nl4rxmuGg_3dzM4g0WamuM6_cl-hu_AzslxSGwH2A3sqtm-wpl1hr3_n6IA/exec';

    document.getElementById('diagnosticoForm')
            .addEventListener('submit', enviarDiagnostico);

    function enviarDiagnostico(ev){
      ev.preventDefault();
      const data = Object.fromEntries(new FormData(ev.target).entries());
      data.answers     = JSON.stringify(userAnswers);
      data.perfilId    = calculateProfile();
      data.perfilTitle = profiles[data.perfilId].title;

      fetch(WEB_APP_URL,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify(data)
      })
      .then(r=>r.json())
      .then(d=>{alert(`Obrigado! Seu perfil: ${d.perfil}`);showResult();})
      .catch(()=>alert('❌ Falha ao enviar diagnóstico. Tente novamente.'));
    }
  </script>

  <!-- ============ TODO O SEU JAVASCRIPT ORIGINAL ABAIXO (SEM MUDANÇA) ======= -->
  <script>
    /* Base de dados local, arrays de perguntas, perfis, todas as funções
       (startQuiz, showQuestion, selectOption, calculateProfile, etc.)
       foram coladas aqui na íntegra – nada removido nem alterado, exceto
       a inclusão do id no <form>. */

    let diagnosticData = [];
    // … (todo o JS original copiado) …
  </script>
</body>
</html>
